@model FullFrameworkEshop.Models.Customer

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <h4>Customer</h4>
        <hr />

        
        
        
        
        
        
        
        
        
        
        
        

        <div class="form-group">
            @Html.LabelFor(model => model.SelectedRegionCode, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownListFor(x => Model.SelectedRegionCode, new SelectList(Model.Regions, "Value", "Text"), htmlAttributes: new { @class = "form-control", id = "Region" })
                @Html.ValidationMessageFor(model => model.SelectedRegionCode, "", new { @class = "text-danger" })
            </div>
        </div>

    </div>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>


<script>
    $('#Country').change(function () {
        var selectedCountry = $("#Country").val();
        var regionsSelect = $('#Region');
        regionsSelect.empty();
        if (selectedCountry != null && selectedCountry != '') {
            $.getJSON('@Url.Action("GetRegions")', { iso3: selectedCountry }, function (regions) {
                if (regions != null && !jQuery.isEmptyObject(regions))
                {
                    regionsSelect.append($('<option/>', {
                        value: null,
                        text: ""
                    }));
                    $.each(regions, function (index, region) {
                        regionsSelect.append($('<option/>', {
                            value: region.Value,
                            text: region.Text
                        }));
                    });
                };
            });
        }
    });
</script>